(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1836:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/myProjects",function(){return n(5519)}])},5519:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n(5893),r=n(7294),c=n(9669),i=n.n(c),a=n(1163),o=function(e){e.projects;var t=e.setProjects,n=(0,a.useRouter)(),c=(0,r.useState)(),o=c[0],u=c[1],l=(0,r.useState)(),d=l[0],h=l[1];return(0,s.jsxs)("div",{className:"new-project-form-container",children:[(0,s.jsx)("h1",{children:"New Project"}),(0,s.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),i().post("/api/project",{title:o,assigned:d},{withCredentials:!0}).then((function(e){return t(e.data.data)})).catch((function(e){return console.log(e)})),u(""),h(""),e.target.title.value="",n.replace("/myProjects")}(e)},className:"new-project-form",children:[(0,s.jsx)("input",{type:"text",placeholder:"title",name:"title",onChange:function(e){return u(e.target.value)}}),(0,s.jsx)("button",{type:"submit",children:"Create Project"})]})]})},u=function(e){var t=e.user,n=(e.setUser,(0,a.useRouter)()),c=(0,r.useState)(),u=c[0],l=c[1],d=(0,r.useState)(!1),h=d[0],j=d[1];return(0,r.useEffect)((function(){i().get("/api/project/all",{withCredentials:!0}).then((function(e){return l(e.data.data)})).catch((function(e){return console.log(e)}))}),[]),(0,s.jsxs)("div",{className:"page-container",children:[(0,s.jsx)("h1",{children:"Projects"}),(0,s.jsxs)("div",{className:"body",children:[t&&t.isAdmin&&(0,s.jsx)("button",{onClick:function(){return j(!h)},className:"btn save-btn",children:"New Project"}),t&&t.isAdmin&&h&&(0,s.jsx)(o,{projects:u,setProjects:l}),(0,s.jsx)("div",{className:"projects-container",children:u&&u.map((function(e){return(0,s.jsxs)("div",{onClick:function(){return t=e._id,void n.push({pathname:"/project",query:{projectId:t}});var t},className:"project-card",children:[(0,s.jsxs)("div",{className:"project-header",children:[(0,s.jsx)("h4",{style:{textTransform:"none"},children:e.title}),(0,s.jsxs)("p",{children:["created:"," ",e.createdAt?e.createdAt.slice(0,10):"just now."]})]}),(0,s.jsxs)("div",{className:"project-update",children:[(0,s.jsxs)("div",{className:"project-assigned-list",children:[(0,s.jsx)("h4",{children:"assigned:"}),e.assigned?e.assigned.map((function(e,t){return(0,s.jsxs)("p",{children:[e,","]},t)})):""]}),(0,s.jsxs)("h4",{children:["tickets: ",e.tickets&&e.tickets.length]}),(0,s.jsxs)("h4",{children:["active:"," ",e.tickets&&e.tickets.filter((function(e){return!e.resolved})).length]}),(0,s.jsxs)("h4",{children:["resolved:"," ",e.tickets&&e.tickets.filter((function(e){return e.resolved})).length]}),(0,s.jsxs)("h4",{children:["Status: ",e.status]}),(0,s.jsxs)("p",{children:["last update:"," ",e.updatedAt?e.updatedAt.slice(0,10):"just now."]})]}),e.tickets&&e.tickets.map((function(t,n){if(n===e.tickets.length-1)return(0,s.jsxs)("h4",{className:"recent-ticket",children:["recent ticket: ",t.title]})}))]},e._id)}))})]})]})}}},function(e){e.O(0,[774,888,179],(function(){return t=1836,e(e.s=t);var t}));var t=e.O();_N_E=t}]);